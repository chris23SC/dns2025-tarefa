services:
  darthvader:
    build: dnsserver
    hostname: darthvader
    command: -g4
    volumes:
      - ./darthvader/named.conf.options:/etc/bind/named.conf.options
      - ./darthvader/named.conf.local:/etc/bind/named.conf.local
      - ./darthvader/db.starwars.lan:/etc/bind/zones/db.starwars.lan
      - ./darthvader/db.172.25.0:/etc/bind/zones/db.172.25.0
    networks:
      rededns:
        ipv4_address: 172.25.0.10
  darthsidious:
    build: dnsserver
    hostname: darthsidious
    depends_on:
      - darthvader
    volumes:
      - ./darthsidious/named.conf.options:/etc/bind/named.conf.options
      - ./darthsidious/named.conf.local:/etc/bind/named.conf.local
    networks:
      rededns:
        ipv4_address: 172.25.0.11
    
  delegado:
    build: dnsserver
    hostname: delegado
    depends_on:
      - darthvader
    volumes:
      - ./delegado/db.imperio.starwars.lan:/etc/bind/zones/db.imperio.starwars.lan
      - ./delegado/named.conf.options:/etc/bind/named.conf.options
      - ./delegado/named.conf.local:/etc/bind/named.conf.local
    networks:
      rededns:
        ipv4_address: 172.25.0.50
  cliente1:
    build: cliente
    hostname: cliente1
    dns: 
    - 172.25.0.10
    - 172.25.0.11
    networks:
      rededns:
        ipv4_address: 172.25.0.111

networks:
  rededns:
    ipam:
      config:
        - subnet: 172.25.0.0/24